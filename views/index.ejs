<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/public/styles.css" />
  </head>
  <body>
    <%- include("partials/header.ejs") %>

    <div class="w3-row">
      <div class="w3-col w3-left">
        <h2>LATEST POSTS</h2>
        <hr />
      </div>
    </div>
    <div class="w3-row w3-white w3-padding w3-round">
      <div class="w3-col">
        <% posts.forEach(post => { %>
        <h2><%= post.title %></h2>
        <p><%= post.content %></p>
        <div class="w3-container w3-center">
          <img
            src="<%= post.image %>"
            alt="<%= post.title %>"
            style="width: 80%; max-width: 300px"
          />
        </div>
        <div
          class="w3-col w3-light-grey w3-margin-top w3-panel w3-padding-large"
        >
          <a class="w3-button w3-blue" href="/edit-post/<%= post.id %>">Edit</a>
          <button
            type="button"
            class="w3-button w3-red deleteBtn"
            data-id="<%= post.id %>"
          >
            Delete
          </button>
        </div>
        <% }) %>
      </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2>Confirm Deletion</h2>
        <p>Are you sure you want to delete this post?</p>
        <div class="modal-buttons">
          <button id="btn_confirm" class="confirm">Confirm</button>
          <button id="btn_cancel" class="cancel">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">Post Deleted Successfully</div>

    <%- include("partials/footer.ejs") %>
    <script src="/js/script.js"></script>
  </body>
</html>
